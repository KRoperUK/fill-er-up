<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fill-er-Up - UK Fuel Prices</title>

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Leaflet MarkerCluster CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

    <!-- Leaflet Locate Control CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

    <style>
        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        #map {
            height: 500px;
            width: 100%;
            border-radius: 6px;
            position: relative;
        }

        .station-card {
            margin-bottom: 1rem;
        }

        .fuel-type {
            display: inline-block;
            margin-right: 1rem;
            margin-bottom: 0.5rem;
        }

        .price-badge {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .loading {
            text-align: center;
            padding: 2rem;
        }

        .retailer-filter {
            margin-bottom: 1rem;
        }

        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        /* Fix for small tags wrapping */
        .tags {
            flex-wrap: wrap;
        }

        /* Ensure boxes don't overflow */
        .box {
            overflow: hidden;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    <i class="fas fa-gas-pump"></i> Fill-er-Up
                </h1>
                <p class="subtitle">
                    UK Fuel Price Comparison
                </p>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="section">
        <div class="container">
            <!-- Loading Indicator -->
            <div id="loading" class="loading">
                <button class="button is-loading is-large is-primary">Loading</button>
                <p class="mt-3">Fetching latest fuel prices...</p>
            </div>

            <!-- Error Message -->
            <div id="error" class="notification is-danger is-hidden">
                <button class="delete" onclick="this.parentElement.classList.add('is-hidden')"></button>
                <strong>Error:</strong> <span id="error-message"></span>
            </div>

            <!-- Summary Section -->
            <div id="summary" class="is-hidden">
                <div class="columns">
                    <div class="column">
                        <div class="box has-text-centered">
                            <p class="heading">Total Retailers</p>
                            <p class="title" id="retailer-count">0</p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="box has-text-centered">
                            <p class="heading">Total Stations</p>
                            <p class="title" id="station-count">0</p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="box has-text-centered">
                            <p class="heading">Last Updated</p>
                            <p class="title is-6" id="last-updated">-</p>
                        </div>
                    </div>
                    <div class="column">
                        <div class="box has-text-centered">
                            <p class="heading">Data Status</p>
                            <p class="title is-6">
                                <span class="tag is-success is-large" id="data-status">Live</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Map and Data -->
            <div id="content" class="is-hidden">
                <div class="columns">
                    <div class="column is-8">
                        <div class="box">
                            <h2 class="title is-4">
                                <i class="fas fa-map-marked-alt"></i> Station Map
                            </h2>
                            <div id="map"></div>
                        </div>
                    </div>

                    <div class="column is-4">
                        <div class="box">
                            <h2 class="title is-4">
                                <i class="fas fa-filter"></i> Filter
                            </h2>
                            <div class="field">
                                <label class="label">Retailer</label>
                                <div class="control">
                                    <div class="select is-fullwidth" id="retailer-filter">
                                        <select id="retailer-select">
                                            <option value="">All Retailers</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">Fuel Type</label>
                                <div class="control">
                                    <div class="select is-fullwidth">
                                        <select id="fuel-type-select">
                                            <option value="">All Fuel Types</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">Search Postcode/Location</label>
                                <div class="control has-icons-left">
                                    <input class="input" type="text" id="search-input" placeholder="e.g., SW1A 1AA">
                                    <span class="icon is-left">
                                        <i class="fas fa-search"></i>
                                    </span>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">Max Distance (miles)</label>
                                <div class="control">
                                    <input class="input" type="number" id="max-distance" value="3" min="1" max="50" step="1">
                                </div>
                                <p class="help">Maximum distance to show nearby stations</p>
                            </div>
                        </div>

                        <div class="box">
                            <h2 class="title is-4">
                                <i class="fas fa-chart-line"></i> Data Sources
                            </h2>
                            <div id="retailer-status" class="content">
                                <p class="has-text-grey">Loading...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stations List -->
                <div class="box">
                    <h2 class="title is-4">
                        <i class="fas fa-list"></i> Stations
                    </h2>
                    <div id="stations-list">
                        <p class="has-text-grey">Select a station on the map or use filters above</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="content has-text-centered">
            <p>
                <strong>Fill-er-Up</strong> by <a href="https://github.com/KRoperUK">KRoperUK</a>.
                Data updated automatically from UK fuel retailers.
            </p>
            <p>
                <a href="https://github.com/KRoperUK/fill-er-up" class="button is-small">
                    <i class="fab fa-github"></i>&nbsp;View on GitHub
                </a>
            </p>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Leaflet MarkerCluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

    <!-- Leaflet Locate Control JS -->
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.js"></script>

    <!-- App JS -->
    <script src="app.js"></script>
</body>
</html>
